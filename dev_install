# install/update a system from a ymake_dev2 updated source using yrsync_dev2

test "$1" != "update" -a "$1" != "new" && {
    echo "Usage: $0 [new|update]"
    exit 1
}

# update a system
test "$1" = "update" && {
    mount /dev/sdb5 /xdir
    shift
    yrsync_dev2 --mode update --nodev --blkdev /dev/sda -f /etc/fstab.main_sda --gentoo $*
    umount /xdir
}

# new install on a 128GB disk
test "$1" = "new_128" && {
    shift
    mount /boot/efi
    yrsync_dev2 --mode new --blkdev /dev/sda -f /etc/fstab.main_sda --parted 128 --grub --delete "" -e "" -R "-ar" $*
}

# new install on a 256GB disk
test "$1" = "new_256" && {
    shift
    mount /boot/efi
    yrsync_dev2 --mode new --blkdev /dev/sda -f /etc/fstab.main_sda --parted 256 --grub --delete "" -e "" -R "-ar" $*
}

